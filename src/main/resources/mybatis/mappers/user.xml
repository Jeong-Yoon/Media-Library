<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="user">
	<select id="getuserbyemail" parameterType="string" resultType="uservo">
		<![CDATA[
			select *
			from users
			where user_email = #{email};
		]]>
	</select>
	
	<insert id="signup" parameterType="signupdto">
		<![CDATA[
			insert into 
			users (user_id, user_email, user_pw, user_name, user_phone, user_company, user_department, user_job)
			values (NEXTVAL('seq_user'), #{email}, #{password}, #{name}, #{phone}, #{company}, #{department}, #{job});
			RETURNING user_id
		]]>
	</insert>
	
	<select id="emailchk" parameterType="string" resultType="int">
		<![CDATA[
			select count(*)
			from users
			where user_email = #{email} 
		]]>
	</select>
	
	<select id="getuseridbyemail" parameterType="string" resultType="long">
		<![CDATA[
			select user_id
			from users
			where user_email = #{email}
		]]>
	</select>
</mapper>